<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/sidebarlayout}">

<head>
	<title>New algorithm: data source</title>
	<!-- Custom styles for this template -->
	<link href="#" th:href="@{/css/simple-sidebar.css}" rel="stylesheet">
	
</head>
<body>
	<!-- Insert page content into the layouts/sidebarpage.html -->
	<th:block layout:fragment="sidebar_pagecontent">
		<ul class="breadcrumb">
			<li><a href="#">Home</a></li>
		    <li><a href="#">Private</a></li>
		    <li><a href="#">Pictures</a></li>
		    <li class="active">Vacation</li>        
		</ul>
		<form method="post" 
			enctype="multipart/form-data" 
			th:action="${sourceUpload}"
			>
			<!-- th:action="${sourceUpload}" -->
			
		 	<h3>Select source data file</h3>

			<div class="btn btn-default btn-file " data-text="Select file">
					<input type="file" class="btn" th:id="fileSelect" name="file">
			</div>
				<input type="submit" class="btn btn-primary" value="Upload" th:id="upload-button" disabled/>
			<!-- <input type="submit" class="btn btn-primary" value="Upload" name="_eventId_upload" th:id="upload-button" disabled/> -->
			<script>
			$(function() {
				var fileSelect = $("input[type='file']"), submitButt = $("#upload-button");
	
				fileSelect.change(function() {
					if(fileSelect.val()) {
						submitButt.attr("disabled", false);
					} else {
						submitButt.attr("disabled", true);
					}
				});
			});
			</script>
			
			<div th:if="${previewData != null}" >
				I wonder, if variable exists...
				
				<div th:insert="fragments/datapreview :: dataPreview(${previewData})">
			 	</div>
		 	</div>

			
		 	<ul class="pager">
				<li><a class="btn btn-info" role="button" th:href="@{${flowExecutionUrl}(_eventId='prev')}" >Previous</a></li>
				<li class="btn btn-danger"><a th:href="@{${flowExecutionUrl}(_eventId='cancel')}" >Cancel</a></li>
				<li><a th:href="@{${flowExecutionUrl}(_eventId='next')}">Next</a></li>
			</ul>
			
			<a class="btn btn-warning" role="button" th:href="@{${flowExecutionUrl}(_eventId='cancel')}" >Cancel</a>
			<div class="btn-group">
				<a class="btn btn-info disabled" role="button" th:href="@{${flowExecutionUrl}(_eventId='prev')}" >Previous</a>
				
				<a class="btn btn-info" role="button" th:href="@{${flowExecutionUrl}(_eventId='next')}">Next</a>
			</div>
		</form>
	</th:block>

	<!-- Insert bar content into the layouts/sidebarpage.html -->
	<th:block layout:fragment="sidebar_barcontent">
		<ul class="sidebar-nav">
			<li class="sidebar-brand">Algorithm flow</li>
			<li><a href="#">File source</a></li>
			
		</ul>
	</th:block>
</body>

</html>